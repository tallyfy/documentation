---
description: Tallyfy Manufactory establishes websocket connections through a two-phase
  authentication process where clients first connect to the collector endpoint then
  send authentication credentials including org ID project ID client UUID and actor
  profile ID to receive confirmation before transmitting events.
id: 8e36d835de5e733708adecf532b21672
pcx_content_type: connect_to_ws
sidebar:
  order: 2
title: Connect to our web socket server
---

After successful authentication and getting client UUID along with actor profile ID, you can connect to the Tallyfy Manufactory websocket server: `wss://collector.tallyfy.com/ws`

Once a websocket connection is established you will receive a message `Manufactory Collector ✅`

## WebSocket Authentication Flow

This diagram shows the complete authentication handshake between your client and the Manufactory WebSocket server.

```d2
C: "C"
WS: "WS"
C: Client
WS: WebSocket Server (collector.tallyfy.com)

C -> WS: "1. Connect to wss://collector.tallyfy.com/ws" {
  style.stroke-dash: 0
}
WS -> C: "2. 'Manufactory Collector ✅'" {
  style.stroke-dash: 3
}

C -> WS: "3. Send auth message {type: 'auth', org_id, project_id, client_uuid, actor_profile_id}" {
  style.stroke-dash: 0
}
WS -> WS: "4. Validate credentials" {
  style.stroke-dash: 0
}
WS -> C: "5. {type: 'auth', status: 'ok'}" {
  style.stroke-dash: 3
}

C.label: |md
  Has client_uuid and
  actor_profile_id from
  prior authentication
|

WS.label: |md
  Connection authenticated
  Ready to send events
|

C.shape: person
WS.shape: cloud
```

### What to notice

- **Two-phase authentication**: First the WebSocket connection itself, then the authentication message exchange
- **Required credentials**: The auth message must include all five required keys (type, org_id, project_id, client_uuid, actor_profile_id)
- **Sequential flow**: Each step must complete successfully before proceeding - the connection won't accept events until authentication succeeds

The next step is that we need to pair the connection with the client/end-user. This is where actor profile ID and client UUID become active.

### Required keys

- `type` (required) string - The message type, in this case we will be using `auth`.
- `org_id` (required) string - Manufactory org ID.
- `project_id` (required) number - The project ID associated with this schema.
- `actor_profile_id` (required) number - The actor profile ID we got after authentication.
- `client_uuid` (required) string - the generated UUID we got after authentication.
### Websocket message example
```json
{
  "type": "auth",
  "org_id": "xyz",
  "project_id": 12345,
  "client_uuid": "e17a56a9-596f-40e6-b01c-d37136df1de8",
  "actor_profile_id": 1
}
```

### Websocket reply example

```json
{
  "type": "auth",
  "status": "ok"
}
```

Now we are able to send actor's generated events via the open websocket channel.

import { CardGrid, LinkTitleCard } from "~/components";

## Related articles
<CardGrid>
<LinkTitleCard header="<b>Websocket > Authentication for the web socket collector</b>" href="/products/manufactory/collector/websocket/auth/" > Tallyfy Manufactory requires websocket client authentication through a POST /auth endpoint using organization ID project ID and actor profile data to generate a 12-hour session UUID. </LinkTitleCard>
<LinkTitleCard header="<b>Collector > Collecting events via websocket</b>" href="/products/manufactory/collector/websocket/" > Tallyfy Manufactory's websocket connection enables real-time bidirectional communication between browser and server for persistent data exchange sessions. </LinkTitleCard>
<LinkTitleCard header="<b>Websocket > Send events via the web socket</b>" href="/products/manufactory/collector/websocket/send_events/" > Websocket events can be sent to Tallyfy Manufactory using a JSON message containing a type field set to "event" and an attributes object with the event data which returns a confirmation message upon successful processing. </LinkTitleCard>
<LinkTitleCard header="<b>Manufactory > Collector</b>" href="/products/manufactory/collector/" > The Tallyfy Manufactory collector enables sending actor data and events through REST API websocket or CLI agent methods with data viewable in a custom interface after creating required schemas. </LinkTitleCard>
</CardGrid>