---
about_tallyfy: true
description: Set up Tallyfy API authentication in Postman using the password grant
  type with environment variables, the required X-Tallyfy-Client header, and automatic
  token refresh for uninterrupted API testing.
id: db184f3f72207253ae7872dd857b1dc5
lastUpdated: 2026-03-01
sidebar:
  order: 2
title: Authentication setup for Postman
---

import { Steps } from '@astrojs/starlight/components';

Tallyfy's API uses OAuth 2.0 with the password grant type. Most endpoints need user context, so you'll configure Postman with your credentials, set up the required headers, and store tokens automatically.

## What you need to know first

Here's what trips people up:

- **Password grant is required** -- most endpoints need user context, not just application-level access
- **The `X-Tallyfy-Client` header is required** -- include it on every request
- **Access tokens last 6 months** -- refresh tokens last 12 months
- **Client credentials grant is limited** -- those tokens only last 7 days and can't access user-scoped endpoints

## Setting up authentication step by step

<Steps>
1. **Get your credentials from Tallyfy**

   Go to **Settings > Integrations > REST API**. You'll need:
   - Client ID (a numeric value)
   - Client Secret
   - Organization ID
   - Your Tallyfy username and password

2. **Create your Postman environment**

   Click **Environments** > **Create Environment** and add these variables:
   ```
   TALLYFY_CLIENT_ID = [your client id]
   TALLYFY_CLIENT_SECRET = [your client secret]
   TALLYFY_ORG_ID = [your org id]
   TALLYFY_USERNAME = your@email.com
   TALLYFY_PASSWORD = [your password]
   TALLYFY_BASE_URL = https://go.tallyfy.com/api
   ```

3. **Create the token request**

   Create a new POST request:
   ```
   POST {{TALLYFY_BASE_URL}}/oauth/token

   Body (x-www-form-urlencoded):
   grant_type = password
   username = {{TALLYFY_USERNAME}}
   password = {{TALLYFY_PASSWORD}}
   client_id = {{TALLYFY_CLIENT_ID}}
   client_secret = {{TALLYFY_CLIENT_SECRET}}
   ```

4. **Store tokens automatically**

   Add this to your token request's **Tests** tab:
   ```javascript
   pm.test("Token response is valid", () => {
       pm.expect(pm.response.code).to.equal(200);
       const response = pm.response.json();
       pm.expect(response).to.have.property('access_token');
       pm.expect(response).to.have.property('expires_in');
   });

   if (pm.response.code === 200) {
       const response = pm.response.json();

       pm.environment.set("TALLYFY_ACCESS_TOKEN", response.access_token);
       pm.environment.set("TALLYFY_REFRESH_TOKEN", response.refresh_token);

       const expiryTime = new Date().getTime() + (response.expires_in * 1000);
       pm.environment.set("TALLYFY_TOKEN_EXPIRY", expiryTime);
       pm.environment.set("TALLYFY_TOKEN_TYPE", response.token_type || "Bearer");

       console.log(`Token acquired. Expires in ${Math.round(response.expires_in/3600)} hours`);
   }
   ```
</Steps>

## Authentication flow visualization

This diagram shows the OAuth lifecycle -- initial token grant, API usage, and token refresh.

```d2
direction: right

Postman: "Postman\nClient" {
  shape: rectangle
  style.fill: "#ff6c37"
  style.font-color: "#fff"
}

OAuth: "Tallyfy OAuth\nServer" {
  shape: rectangle
  style.fill: "#e6f3ff"
}

API: "Tallyfy API" {
  shape: cylinder
  style.fill: "#ffe6e6"
}

Postman -> OAuth: "1. Password grant\nrequest" {
  style.stroke: "#333"
}

OAuth -> OAuth: "2. Validate\ncredentials" {
  style.stroke: "#333"
}

OAuth -> Postman: "3. Return tokens\n(access + refresh)" {
  style.stroke: "#333"
}

Postman -> Postman: "4. Store tokens\nin environment" {
  style.stroke: "#666"
  style.stroke-dash: 3
}

Postman -> API: "5. API request with\nBearer + X-Tallyfy-Client" {
  style.stroke: "#333"
}

API -> API: "6. Validate headers\nand token" {
  style.stroke: "#333"
}

API -> Postman: "7. Return API\nresponse" {
  style.stroke: "#333"
}

Postman -> Postman: "8. Check token\nexpiry" {
  style.stroke: "#666"
  style.stroke-dash: 3
}

Postman -> OAuth: "9. Refresh token\n(before expiry)" {
  style.stroke: "#333"
}

OAuth -> Postman: "10. New tokens" {
  style.stroke: "#333"
}

Postman -> Postman: "11. Update stored\ntokens" {
  style.stroke: "#666"
  style.stroke-dash: 3
}

Postman -> API: "12. Continue API\ncalls" {
  style.stroke: "#333"
}

API -> Postman: "13. Success" {
  style.stroke: "#333"
}
```

**What to notice:**
- **Steps 1-3** -- the password grant requires all four parameters (username, password, client_id, client_secret)
- **Step 5** -- every API call needs both the Bearer token and the `X-Tallyfy-Client` header
- **Steps 9-12** -- refresh happens before expiry using the stored refresh token

## The required headers

Every API request needs two headers. Add them to your collection's pre-request script so you don't have to set them manually each time:

```javascript
pm.request.headers.add({
    key: 'X-Tallyfy-Client',
    value: 'APIClient'
});

const token = pm.environment.get("TALLYFY_ACCESS_TOKEN");
if (token) {
    pm.request.headers.add({
        key: 'Authorization',
        value: `Bearer ${token}`
    });
}
```

## Token refresh

Access tokens last 6 months and refresh tokens last 12 months. You probably won't hit expiry during a testing session, but here's a pre-request script that handles refresh automatically:

```javascript
const tokenExpiry = pm.environment.get("TALLYFY_TOKEN_EXPIRY");
const now = new Date().getTime();

if (!tokenExpiry || now >= tokenExpiry - 300000) {
    const refreshToken = pm.environment.get("TALLYFY_REFRESH_TOKEN");

    if (refreshToken) {
        pm.sendRequest({
            url: pm.environment.get("TALLYFY_BASE_URL") + "/oauth/token",
            method: 'POST',
            header: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: {
                mode: 'urlencoded',
                urlencoded: [
                    {key: 'grant_type', value: 'refresh_token'},
                    {key: 'refresh_token', value: refreshToken},
                    {key: 'client_id', value: pm.environment.get("TALLYFY_CLIENT_ID")},
                    {key: 'client_secret', value: pm.environment.get("TALLYFY_CLIENT_SECRET")}
                ]
            }
        }, (err, res) => {
            if (!err && res.code === 200) {
                const response = res.json();
                pm.environment.set("TALLYFY_ACCESS_TOKEN", response.access_token);
                pm.environment.set("TALLYFY_REFRESH_TOKEN", response.refresh_token);
                pm.environment.set("TALLYFY_TOKEN_EXPIRY",
                    now + (response.expires_in * 1000));
                console.log("Token refreshed successfully");
            } else {
                console.error("Token refresh failed - request a new token manually");
            }
        });
    }
}
```

## Grant types compared

| Grant type | What it does | When to use |
|------------|--------------|-------------|
| password | Full user context -- access all endpoints | API testing in Postman |
| client_credentials | Application-only access (7-day tokens) | Automated system integrations |
| refresh_token | Gets a new access token | When your current token expires |

Use password grant for Postman testing. Client credentials won't give you access to user-scoped endpoints like templates, processes, or tasks.

## Security tips

- Mark sensitive variables as **secret** in Postman so they're masked
- Use the initial/current value distinction -- initial values sync with your team, current values stay local
- Don't commit exported environments to version control
- When sharing collections, export them without the environment and document which variables teammates need to create

## Common errors and fixes

**401 Unauthenticated:**
1. Missing `X-Tallyfy-Client: APIClient` header
2. Token has expired -- request a new one or check your refresh script
3. Using `client_credentials` grant for a user-scoped endpoint -- switch to `password`
4. Malformed Authorization header -- it should be `Bearer [token]` with exactly one space

**400 Bad Request on the token endpoint:**
- Body must be `x-www-form-urlencoded`, not JSON
- All parameters (grant_type, username, password, client_id, client_secret) must be present

**Invalid client:**
- Double-check your Client ID and Client Secret
- Make sure you're using the right Postman environment

## Testing your setup

Send this request to confirm everything works:
```
GET {{TALLYFY_BASE_URL}}/me

Headers:
Authorization: Bearer {{TALLYFY_ACCESS_TOKEN}}
X-Tallyfy-Client: APIClient
Accept: application/json
```

If you get your user details back, you're all set.

## Next steps

With authentication working, you can:
- [Work with templates and processes](/products/pro/integrations/open-api/api-clients/postman/templates-processes/)
- [Automate task operations](/products/pro/integrations/open-api/api-clients/postman/task-operations/)

import { CardGrid, LinkTitleCard } from "~/components";

## Related articles
<CardGrid>
<LinkTitleCard header="<b>Postman > Troubleshooting common issues</b>" href="/products/pro/integrations/open-api/api-clients/postman/troubleshooting/" > Fixing Postman errors with Tallyfy's API requires checking the X-Tallyfy-Client header first then verifying the authentication grant type is password (not client_credentials) and ensuring tokens haven't expired since these three issues cause most API failures. </LinkTitleCard>
<LinkTitleCard header="<b>Api Clients > Getting started with Postman API testing</b>" href="/products/pro/integrations/open-api/api-clients/postman/" > This guide shows how to set up Postman with Tallyfy's API for testing workflow automation endpoints including authentication configuration environment setup and common operations like launching processes and completing tasks. </LinkTitleCard>
<LinkTitleCard header="<b>Open Api > API integration guide</b>" href="/products/pro/integrations/open-api/how-to-integrate-with-tallyfy-using-api/" > The Tallyfy REST API enables workflow automation through two authentication methods (user-based tokens obtained from Settings or application-based OAuth credentials) requiring specific headers and proper token management while supporting multi-organization contexts and webhook integrations with standardized date formats. </LinkTitleCard>
<LinkTitleCard header="<b>Authentication > Get & use a personal access token</b>" href="/products/pro/integrations/open-api/code-samples/authentication/personal-access-token/" > The Tallyfy API uses personal access tokens for authentication which requires including the token in the Authorization header along with Accept and X-Tallyfy-Client headers for all API requests with tokens being invalidated upon logout. </LinkTitleCard>
</CardGrid>